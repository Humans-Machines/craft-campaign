{% extends 'campaign/settings/_layout' %}

{% import '_includes/forms' as forms %}

{% set title = campaignType.id ? campaignType.name : 'Create a new campaign type'|t('campaign') %}

{% set crumbs = [
    { label: 'Settings'|t('campaign'), url: url('campaign/settings/campaigntypes') },
    { label: 'Campaign Types'|t('campaign'), url: url('campaign/settings/campaigntypes') }
] %}


{% block content %}

    <input type="hidden" name="action" value="campaign/campaign-types/save-campaign-type">

    {{ redirectInput('campaign/settings/campaigntypes') }}

    {% if campaignType.id %}
        <input type="hidden" name="campaignTypeId" value="{{ campaignType.id }}">
    {% endif %}

    {{ forms.textField({
        first: true,
        label: "Name"|t('campaign'),
        instructions: "What this campaign type will be called in the CP."|t('campaign'),
        id: 'name',
        name: 'name',
        value: campaignType.name,
        errors: campaignType.getErrors('name'),
        autofocus: true,
        required: true
    }) }}

    {{ forms.textField({
        label: "Handle"|t('campaign'),
        instructions: "How you’ll refer to this campaign type in the templates."|t('campaign'),
        id: 'handle',
        class: 'code',
        name: 'handle',
        value: campaignType.handle,
        errors: campaignType.getErrors('handle'),
        required: true
    }) }}

    {{ forms.textField({
        label: "Campaign URI Format"|t('campaign'),
        instructions: "What the campaign URIs should look like. You can include tags that output campaign properties, such as {slug}."|t('campaign'),
        id: 'uriFormat',
        name: 'uriFormat',
        value: campaignType.uriFormat,
        errors: campaignType.getErrors('uriFormat'),
        autocomplete: true,
        required: true
    }) }}

    {{ forms.textField({
        label: "HTML Template"|t('campaign'),
        instructions: "The HTML template to use when a campaign’s URL is requested."|t('campaign'),
        id: 'htmlTemplate',
        name: 'htmlTemplate',
        value: campaignType.htmlTemplate,
        errors: campaignType.getErrors('htmlTemplate'),
        autocomplete: true,
        required: true
    }) }}

    {{ forms.textField({
        label: "Plaintext Template"|t('campaign'),
        instructions: "The plaintext template to use when sending a plaintext version."|t('campaign'),
        id: 'plaintextTemplate',
        name: 'plaintextTemplate',
        value: campaignType.plaintextTemplate,
        errors: campaignType.getErrors('plaintextTemplate'),
        autocomplete: true,
        required: true
    }) }}

    <hr>

    {% include "_includes/fieldlayoutdesigner" with {
        fieldLayout: campaignType.getFieldLayout(),
        customizableTabs: false,
        pretendTabName: "Campaign"|t('campaign')
    } only %}

{% endblock %}


{% if not campaignType.handle %}
    {% js "new Craft.HandleGenerator('#name', '#handle');" %}
{% endif %}
