{% extends 'campaign/reports/_layout' %}

{% set title = 'Contacts'|t('campaign') %}

{% set crumbs = [] %}

{% set data = craft.campaign.reports.getContactsReportData() %}


{% block content %}

    {% if data.total > 0 %}
        <div class="percentage-chart" data-label="{{ 'Subscribed'|t('campaign') }}" data-value="{{ data.subscribedRate }}" data-color="#008000"></div>
        <div class="percentage-chart" data-label="{{ 'Unsubscribed'|t('campaign') }}" data-value="{{ data.unsubscribedRate }}" data-color="#D0021B"></div>
    {% endif %}

    <h2>{{ "Contacts Overview"|t('campaign') }}</h2>

    <table class="data fullwidth collapsible">
        <tbody>
            <tr>
                <th class="light">{{ 'Total'|t('campaign') }}</th>
                <td>{{ data.total }}</td>
            </tr>
            <tr>
                <th class="light">{{ 'Subscribed'|t('campaign') }}</th>
                <td>{{ data.subscribed }}</td>
            </tr>
            <tr>
                <th class="light">{{ 'Unubscribed'|t('campaign') }}</th>
                <td>{{ data.unsubscribed }}</td>
            </tr>
            <tr>
                <th class="light">{{ 'Complained'|t('campaign') }}</th>
                <td>{{ data.complained }}</td>
            </tr>
            <tr>
                <th class="light">{{ 'Bounced'|t('campaign') }}</th>
                <td>{{ data.bounced }}</td>
            </tr>
        </tbody>
    </table>

    <br/><br/>

    {% set limit = 5 %}

    <h2>{{ "Contact Activity"|t('campaign') }}</h2>
    {% include 'campaign/reports/contacts/_includes/contact-activity' with { contactActivity: craft.campaign.reports.getContactsActivity(limit) } %}

    <div class="cols">
        <div class="half">
            <h2>{{ "Locations"|t('campaign') }}</h2>
            {% include 'campaign/reports/_includes/locations' with { locations: craft.campaign.reports.getContactsLocations(limit), countLabel: 'Contacts', reportUrl: url('campaign/reports/contacts/locations') } %}
        </div>

        <div class="half">
            <h2>{{ "Devices"|t('campaign') }}</h2>
            {% include 'campaign/reports/_includes/devices' with { devices: craft.campaign.reports.getContactsDevices(false, limit), countLabel: 'Contacts', reportUrl: url('campaign/reports/contacts/devices') } %}
        </div>
    </div>
    <div class="clear"></div>

{% endblock %}